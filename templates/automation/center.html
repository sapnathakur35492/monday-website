<div class="fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in">
    <div class="flex h-[80vh] w-[90vw] max-w-6xl bg-white rounded-xl shadow-2xl overflow-hidden animate-scale-in">
        <!-- Sidebar -->
        <div class="w-64 bg-slate-50 border-r border-slate-200 flex flex-col p-4">
            <h2 class="text-xl font-bold text-slate-800 mb-6 px-2">Automation Center</h2>

            <nav class="space-y-1">
                <button
                    class="w-full text-left px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 font-semibold flex justify-between items-center group transition-colors">
                    <span>Board automations</span>
                    <span class="bg-indigo-200 text-indigo-800 text-xs px-2 py-0.5 rounded-full">{{ rules.count
                        }}</span>
                </button>
                <button
                    class="w-full text-left px-3 py-2 rounded-lg text-slate-600 hover:bg-slate-100 font-medium flex justify-between items-center group transition-colors">
                    <span>Templates</span>
                    <span class="bg-slate-200 text-slate-600 text-xs px-2 py-0.5 rounded-full">0</span>
                </button>
            </nav>

            <div class="mt-auto">
                <div class="p-3 bg-indigo-600 rounded-xl text-white">
                    <p class="font-bold text-sm mb-1">Usage</p>
                    <div class="w-full bg-indigo-800 rounded-full h-2 mb-2">
                        <div class="bg-white rounded-full h-2 w-[5%]"></div>
                    </div>
                    <p class="text-xs text-indigo-100">0 / 1000 actions used</p>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col bg-white">
            <!-- Header -->
            <div class="h-16 border-b border-slate-100 flex items-center justify-between px-8">
                <h3 class="font-bold text-lg text-slate-800">Board Automations</h3>
                <a href="{% url 'create_rule' board.id %}"
                    class="btn-primary flex items-center gap-2 px-5 py-2 rounded-lg font-bold text-sm shadow-md hover:shadow-lg transition-all"
                    hx-target="#automation-modal-container" hx-push-url="true">
                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                    </svg>
                    New Automation
                </a>
            </div>

            <!-- List -->
            <div class="flex-1 overflow-y-auto p-8">
                <div class="grid gap-4">
                    {% for rule in rules %}
                    <div
                        class="group border border-slate-200 rounded-xl p-4 hover:shadow-md hover:border-indigo-300 transition-all bg-white relative">
                        <div class="flex items-start gap-4">
                            <div
                                class="h-10 w-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white shadow-sm shrink-0">
                                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-slate-800 text-base leading-snug">{{ rule.name }}</h4>
                                <div class="flex items-center gap-4 mt-2">
                                    <span
                                        class="text-xs font-bold text-slate-400 uppercase tracking-wider">Active</span>
                                    <span class="text-xs text-slate-400">ID: {{ rule.id }}</span>
                                </div>
                            </div>

                            <!-- Toggle Switch (Visual Only) -->
                            <div
                                class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                <input type="checkbox" name="toggle" id="toggle-{{ rule.id }}"
                                    class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer checked:right-0 right-5"
                                    checked />
                                <label for="toggle-{{ rule.id }}"
                                    class="toggle-label block overflow-hidden h-5 rounded-full bg-indigo-500 cursor-pointer"></label>
                            </div>

                            <!-- Menu -->
                            <div
                                class="opacity-0 group-hover:opacity-100 transition-opacity absolute top-4 right-14 flex gap-2">
                                <a href="{% url 'edit_rule' board.id rule.id %}"
                                    class="p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 rounded-md">
                                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                                    </svg>
                                </a>
                                <form method="POST" action="{% url 'delete_rule' board.id rule.id %}"
                                    onsubmit="return confirm('Delete?')" style="display:inline;">
                                    {% csrf_token %}
                                    <button class="p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-md">
                                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                        </svg>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="text-center py-16">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 mb-4">
                            <svg class="w-8 h-8 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-slate-900">No automations yet</h3>
                        <p class="mt-1 text-slate-500">Create custom recipes to save time.</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Footer -->
            <div class="h-14 border-t border-slate-100 flex items-center justify-end px-8 bg-slate-50/50">
                <button onclick="document.getElementById('automation-modal-container').innerHTML = '';"
                    class="text-slate-500 hover:text-slate-800 font-semibold text-sm">Close</button>
            </div>
        </div>
    </div>